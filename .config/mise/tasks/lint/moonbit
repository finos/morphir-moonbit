#!/usr/bin/env bash
# mise description="Check Moonbit code formatting"
set -euo pipefail

echo "üîç Checking Moonbit code formatting..."

cd pkgs

# Check each package
for pkg in morphir-sdk morphir-core morphir-moonbit-bindings; do
  if [ -d "$pkg" ]; then
    echo "Checking $pkg..."
    cd "$pkg"
    moon fmt --check || {
      echo "‚ùå Formatting issues found in $pkg. Run 'moon fmt' to fix."
      exit 1
    }
    cd ..
  fi
done

cd ..

echo "‚úÖ Moonbit code formatting check complete"
